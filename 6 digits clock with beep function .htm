<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>–ß–∞—Å–æ–≤–Ω–∏–∫ ‚Äì —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ</title>

<style>
  @font-face {
    font-family: 'HP15C';
    src: url('https://raw.githubusercontent.com/Xname41/projects/main/HP-15C_Simulator_Font.ttf') format('truetype');
  }

  html, body {
    height: 100%;
    margin: 0;
    overflow: hidden; /* —Å–∫—Ä–∏–≤–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª–µ–Ω –∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–µ–Ω —Å–∫—Ä–æ–ª */
  }

  body {
    font-family: 'HP15C', monospace, sans-serif;
    background: #121212;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    cursor: none;
    touch-action: manipulation;
  }

  #clock {
    letter-spacing: 0.05em;
    white-space: pre; /* –∑–∞–ø–∞–∑–≤–∞ –ø—Ä–∞–∑–Ω–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏ */
    /* transform —â–µ —Å–µ –∑–∞–¥–∞–≤–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ –≤ JS –∑–∞ –æ—Ñ—Å–µ—Ç */
  }
</style>
</head>

<body>
  <div id="clock"> 0:00:00</div>

<script>
/* =======================
   –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –û–†–ê–ó–ú–ï–†–Ø–í–ê–ù–ï –ò –î–ò–ù–ê–ú–ò–ß–ï–ù –û–§–°–ï–¢
   ======================= */
function resizeFont() {
  const w = window.innerWidth;
  const h = window.innerHeight;

  let baseSize = Math.min(w / 6, h / 1.2);
  const scale = 1.3;

  const maxFont = h * 0.9;
  const fontSize = Math.min(baseSize * scale, maxFont);

  document.body.style.fontSize = fontSize + 'px';

  const clock = document.getElementById("clock");
  const offset = -fontSize * -0.05; 
  clock.style.transform = `translateY(${offset}px)`;
}

window.addEventListener('resize', resizeFont);
resizeFont();

/* =======================
   –§–û–†–ú–ê–¢–ò–†–ê–ù–ï –ù–ê –ß–ê–°–ê
   ======================= */
function pad2(num) {
  return num.toString().padStart(2, '0');
}

function hourPad(num) {
  return num < 10 ? ' ' + num : String(num);
}

/* =======================
   –ó–í–£–ö–û–í –°–ò–ì–ù–ê–õ
   ======================= */
let lastSignal = null;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ —Ç–æ–Ω–æ–≤–µ—Ç–µ (–≤ —Å–µ–∫—É–Ω–¥–∏)
const durationFullHour = 0.12;     // –ö—Ä—ä–≥—ä–ª —á–∞—Å
let durationHalfHour = 0.5;        // ‚Üê –º–æ–∂–µ—à –¥–∞ –ø—Ä–æ–º–µ–Ω—è—à —Ç–∞–∑–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç –∑–∞ –ø–æ–ª–æ–≤–∏–Ω —á–∞—Å

function beep(count = 1, duration = 0.12) {
  for (let i = 0; i < count; i++) {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = 'square';
    osc.frequency.value = 1200;
    gain.gain.value = 0.15;

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    const t = audioCtx.currentTime + i * 0.25;
    osc.start(t);
    osc.stop(t + duration);
  }
}

/* =======================
   –û–°–ù–û–í–ï–ù –ß–ê–°–û–í–ù–ò–ö
   ======================= */
function updateClock() {
  const now = new Date();

  const h = now.getHours();
  const m = now.getMinutes();
  const s = now.getSeconds();

  document.getElementById("clock").textContent =
    `${hourPad(h)}:${pad2(m)}:${pad2(s)}`;

  // üîî –°–∏–≥–Ω–∞–ª–∏
  if (s === 0) {
    const key = `${h}:${m}`;
    if (key !== lastSignal) {
      if (m === 0) beep(2, durationFullHour);       // –∫—Ä—ä–≥—ä–ª —á–∞—Å
      else if (m === 30) beep(1, durationHalfHour); // –ø–æ–ª–æ–≤–∏–Ω —á–∞—Å (—Ä–µ–≥—É–ª–∏—Ä—É–µ–º–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç)
      lastSignal = key;
    }
  }
}

updateClock();
setInterval(updateClock, 1000);

/* =======================
   FULLSCREEN –£–ü–†–ê–í–õ–ï–ù–ò–ï
   ======================= */
function enterFullscreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(() => {});
  }
}

function exitFullscreen() {
  if (document.fullscreenElement) {
    document.exitFullscreen();
  }
}

document.addEventListener("keydown", (e) => {
  if (e.key.toLowerCase() === "f") enterFullscreen();
  else if (e.key === "Escape") exitFullscreen();
});

/* =======================
   TOUCH (–∑–∞ –æ—Ç–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –∑–≤—É–∫)
   ======================= */
document.addEventListener("touchstart", () => {
  if (audioCtx.state === "suspended") {
    audioCtx.resume();
  }
});
</script>
</body>
</html>
